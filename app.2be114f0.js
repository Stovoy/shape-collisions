parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"A2T1":[function(require,module,exports) {
function n(n,o){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=i(n))||o&&n&&"number"==typeof n.length){t&&(n=t);var e=0,u=function(){};return{s:u,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,l=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var n=t.next();return r=n.done,n},e:function(n){l=!0,s=n},f:function(){try{r||null==t.return||t.return()}finally{if(l)throw s}}}}function i(n,i){if(n){if("string"==typeof n)return o(n,i);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(n,i):void 0}}function o(n,i){(null==i||i>n.length)&&(i=n.length);for(var o=0,t=new Array(i);o<i;o++)t[o]=n[o];return t}function t(n,i){for(var o=0;o<i.length;o++){var t=i[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function e(n,i,o){return i&&t(n.prototype,i),o&&t(n,o),n}function u(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var s=50,r=3,l=5,a=200,d=200,h=!1,c=!1,x=!1,y=!1,g=document.getElementById("numberOfShapes"),f=document.getElementById("minNumberOfSides"),b=document.getElementById("sideNumberVarience"),B=document.getElementById("maxShapeWidth"),v=document.getElementById("maxShapeHeight"),p=document.getElementById("drawQuadTree"),w=document.getElementById("drawBoundingBoxes"),m=document.getElementById("hideColliding"),k=document.getElementById("hideNonColliding");g.value=s,g.oninput(null),f.value=r,f.oninput(null),b.value=l,b.oninput(null),B.value=a,B.oninput(null),v.value=d,v.oninput(null),g.onchange=function(){s=g.value,Q()},f.onchange=function(){r=f.value,Q()},b.onchange=function(){l=b.value,Q()},B.onchange=function(){a=B.value,Q()},v.onchange=function(){d=v.value,Q()},p.onclick=function(){h=p.checked},w.onclick=function(){c=w.checked},m.onclick=function(){x=m.checked},k.onclick=function(){y=k.checked};var I=function n(i,o){u(this,n),this.p1=i,this.p2=o},S=function n(i,o){u(this,n),this.x=i,this.y=o},M=function(){function i(n,o,t,e,s){u(this,i),this.id=n,this.points=o,this.x=t,this.y=e,this.color=s,this.xVel=0,this.yVel=0,this.baseBoundingBox=this.calcBoundingBox(),this.recalcBoundingBox()}return e(i,[{key:"draw",value:function(n,i){if((!i||!x)&&(i||!y)){n.beginPath(),n.moveTo(this.points[0].x+this.x,this.points[0].y+this.y);for(var o=1;o<this.points.length;o++){var t=this.points[o];n.lineTo(t.x+this.x,t.y+this.y)}n.lineTo(this.points[0].x+this.x,this.points[0].y+this.y),n.strokeStyle="black",n.fillStyle=i?"red":this.color,n.stroke(),n.fill(),c&&(n.strokeStyle="purple",n.strokeRect(this.boundingBox.x,this.boundingBox.y,this.boundingBox.width,this.boundingBox.height))}}},{key:"calcLines",value:function(){for(var n=[],i=0;i<this.points.length;i++){var o=this.points[i],t=void 0;t=i===this.points.length-1?this.points[0]:this.points[i+1],n.push(new I(new S(o.x+this.x,o.y+this.y),new S(t.x+this.x,t.y+this.y)))}return n}},{key:"calcBoundingBox",value:function(){var i,o=null,t=null,e=0,u=0,s=n(this.points);try{for(s.s();!(i=s.n()).done;){var r=i.value;(null==o||r.x<o)&&(o=r.x),(null==t||r.y<t)&&(t=r.y),r.x>e&&(e=r.x),r.y>u&&(u=r.y)}}catch(l){s.e(l)}finally{s.f()}return new E(o,t,e-o,u-t)}},{key:"recalcBoundingBox",value:function(){this.boundingBox=new E(this.baseBoundingBox.x+this.x,this.baseBoundingBox.y+this.y,this.baseBoundingBox.width,this.baseBoundingBox.height)}},{key:"collides",value:function(i){var o,t=n(this.calcLines());try{for(t.s();!(o=t.n()).done;){var e,u=o.value,s=n(i.calcLines());try{for(s.s();!(e=s.n()).done;){if(C(u,e.value))return!0}}catch(r){s.e(r)}finally{s.f()}}}catch(r){t.e(r)}finally{t.f()}return O(this.boundingBox.center,i.boundingBox)}}]),i}(),E=function(){function n(i,o,t,e){u(this,n),this.x=i,this.y=o,this.width=t,this.height=e,this.center=new S(this.x+this.width/2,this.y+this.height/2)}return e(n,[{key:"collides",value:function(n){return N(this,n)}}]),n}(),V=function(){function i(n,o,t,e){u(this,i),this.root=new A(n,o,t,e),this.capacity=1}return e(i,[{key:"insert",value:function(n){this.insertInto(this.root,n)}},{key:"insertInto",value:function(n,i){if(i.boundingBox.collides(n.boundingBox)){n.shapes.length>this.capacity&&!n.subdivided&&this.subdivideNode(n);var o=!0;n.subdivided&&(o=!1,i.boundingBox.collides(n.nw.boundingBox)?i.boundingBox.collides(n.ne.boundingBox)||i.boundingBox.collides(n.sw.boundingBox)||i.boundingBox.collides(n.se.boundingBox)?o=!0:this.insertInto(n.nw,i):i.boundingBox.collides(n.ne.boundingBox)?i.boundingBox.collides(n.sw.boundingBox)||i.boundingBox.collides(n.se.boundingBox)?o=!0:this.insertInto(n.ne,i):i.boundingBox.collides(n.sw.boundingBox)?i.boundingBox.collides(n.se.boundingBox)?o=!0:this.insertInto(n.sw,i):i.boundingBox.collides(n.se.boundingBox)&&this.insertInto(n.se,i)),o&&n.shapes.push(i)}}},{key:"subdivideNode",value:function(i){var o=i.boundingBox.width/2,t=i.boundingBox.height/2;i.nw=new A(i.boundingBox.x,i.boundingBox.y,o,t),i.ne=new A(i.boundingBox.x+o,i.boundingBox.y,o,t),i.sw=new A(i.boundingBox.x,i.boundingBox.y+t,o,t),i.se=new A(i.boundingBox.x+o,i.boundingBox.y+t,o,t),i.subdivided=!0;var e=i.shapes;i.shapes=[];var u,s=n(e);try{for(s.s();!(u=s.n()).done;){var r=u.value;this.insertInto(i,r)}}catch(l){s.e(l)}finally{s.f()}}},{key:"collisions",value:function(n){return this.collisionsFrom(this.root,n)}},{key:"collisionsFrom",value:function(i,o){var t,e=[],u=n(i.shapes);try{for(u.s();!(t=u.n()).done;){var s=t.value;o.id!==s.id&&(o.collides(s)&&e.push(s))}}catch(r){u.e(r)}finally{u.f()}return i.subdivided&&(o.boundingBox.collides(i.nw.boundingBox)&&(e=e.concat(this.collisionsFrom(i.nw,o))),o.boundingBox.collides(i.ne.boundingBox)&&(e=e.concat(this.collisionsFrom(i.ne,o))),o.boundingBox.collides(i.sw.boundingBox)&&(e=e.concat(this.collisionsFrom(i.sw,o))),o.boundingBox.collides(i.se.boundingBox)&&(e=e.concat(this.collisionsFrom(i.se,o)))),e}},{key:"draw",value:function(n,i){n.strokeStyle="black",n.strokeRect(i.boundingBox.x,i.boundingBox.y,i.boundingBox.width,i.boundingBox.height),i.subdivided&&(this.draw(n,i.nw),this.draw(n,i.ne),this.draw(n,i.sw),this.draw(n,i.se))}}]),i}(),A=function n(i,o,t,e){u(this,n),this.shapes=[],this.boundingBox=new E(i,o,t,e),this.nw=null,this.ne=null,this.sw=null,this.se=null,this.subdivided=!1};function F(n,i,o){return i.x<=Math.max(n.x,o.x)&&i.x>=Math.min(n.x,o.x)&&i.y<=Math.max(n.y,o.y)&&i.y>=Math.min(n.y,o.y)}function T(n,i,o){var t=(i.y-n.y)*(o.x-i.x)-(i.x-n.x)*(o.y-i.y);return t>0?1:t<0?2:0}function C(n,i){var o=T(n.p1,n.p2,i.p1),t=T(n.p1,n.p2,i.p2),e=T(i.p1,i.p2,n.p1),u=T(i.p1,i.p2,n.p2);return o!==t&&e!==u||(!(0!==o||!F(n.p1,i.p1,n.p2))||(!(0!==t||!F(n.p1,i.p2,n.p2))||(!(0!==e||!F(i.p1,n.p1,i.p2))||0===u&&F(i.p1,n.p2,i.p2))))}function N(n,i){return n.x<i.x+i.width&&n.x+n.width>i.x&&n.y<i.y+i.height&&n.y+n.height>i.y}function O(n,i){return n.x>i.x&&n.x<i.x+i.width&&n.y>i.y&&n.y<i.y+i.height}var j=document.getElementById("canvas"),L=j.getContext("2d"),R=800,P=800,H=[];function Q(){H=[];for(var n=["blue","purple","pink","orange","black","green"],i=0;i<s;i++){for(var o=[],t=0;t<Math.round(Math.random()*l)+r;t++)o.push(new S(Math.random()*a,Math.random()*d));H.push(new M(i,o,800*Math.random(),800*Math.random(),n[Math.floor(Math.random()*n.length)]))}}function U(){L.fillStyle="white",L.fillRect(0,0,R,P);var i,o=new V(0,0,R,P),t=n(H);try{for(t.s();!(i=t.n()).done;){var e=i.value;o.insert(e)}}catch(b){t.e(b)}finally{t.f()}h&&o.draw(L,o.root);var u,s=new Set,r=n(H);try{for(r.s();!(u=r.n()).done;){var l=u.value;if(!s.has(l.id)){var a,d=o.collisions(l),c=n(d);try{for(c.s();!(a=c.n()).done;){var x=a.value;s.add(x.id)}}catch(b){c.e(b)}finally{c.f()}d.length>0&&s.add(l.id)}}}catch(b){r.e(b)}finally{r.f()}var y,g=n(H);try{for(g.s();!(y=g.n()).done;){var f=y.value;s.has(f.id)?f.draw(L,!0):f.draw(L)}}catch(b){g.e(b)}finally{g.f()}}function W(){var i,o=n(H);try{for(o.s();!(i=o.n()).done;){var t=i.value;t.xVel+=2*(Math.random()-.5),t.yVel+=2*(Math.random()-.5),t.x+=t.xVel,t.y+=t.yVel,t.x<0&&(t.x=0,t.xVel=0),t.y<0&&(t.y=0,t.yVel=0),t.recalcBoundingBox(),t.boundingBox.x+t.boundingBox.width>R&&(t.x-=t.boundingBox.x-(R-t.boundingBox.width),t.xVel=0),t.boundingBox.y+t.boundingBox.height>P&&(t.y-=t.boundingBox.y-(P-t.boundingBox.height),t.yVel=0),t.recalcBoundingBox()}}catch(e){o.e(e)}finally{o.f()}}function $(){Q(),U(),setInterval(function(){W(),U()},50)}$();
},{}]},{},["A2T1"], null)
//# sourceMappingURL=https://stovoy.github.io/shape-collisions/app.2be114f0.js.map