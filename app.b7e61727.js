parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"A2T1":[function(require,module,exports) {
function n(n,t){var o;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(o=i(n))||t&&n&&"number"==typeof n.length){o&&(n=o);var e=0,s=function(){};return{s:s,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,r=!0,l=!1;return{s:function(){o=n[Symbol.iterator]()},n:function(){var n=o.next();return r=n.done,n},e:function(n){l=!0,u=n},f:function(){try{r||null==o.return||o.return()}finally{if(l)throw u}}}}function i(n,i){if(n){if("string"==typeof n)return t(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(n,i):void 0}}function t(n,i){(null==i||i>n.length)&&(i=n.length);for(var t=0,o=new Array(i);t<i;t++)o[t]=n[t];return o}function o(n,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function e(n,i,t){return i&&o(n.prototype,i),t&&o(n,t),n}function s(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var u=50,r=3,l=5,a=200,d=200,h=!1,c=!1,y=!1,x=!1,f=document.getElementById("numberOfShapes"),g=document.getElementById("minNumberOfSides"),b=document.getElementById("sideNumberVarience"),v=document.getElementById("maxShapeWidth"),B=document.getElementById("maxShapeHeight"),p=document.getElementById("drawQuadTree"),w=document.getElementById("drawBoundingBoxes"),m=document.getElementById("hideColliding"),k=document.getElementById("hideNonColliding");f.value=u,f.oninput(null),g.value=r,g.oninput(null),b.value=l,b.oninput(null),v.value=a,v.oninput(null),B.value=d,B.oninput(null),f.onchange=function(){u=f.value,Q()},g.onchange=function(){r=g.value,Q()},b.onchange=function(){l=b.value,Q()},v.onchange=function(){a=v.value,Q()},B.onchange=function(){d=B.value,Q()},p.onclick=function(){h=p.checked},w.onclick=function(){c=w.checked},m.onclick=function(){y=m.checked},k.onclick=function(){x=k.checked};var I=function n(i,t){s(this,n),this.p1=i,this.p2=t},S=function n(i,t){s(this,n),this.x=i,this.y=t},M=function(){function i(n,t,o,e,u){s(this,i),this.id=n,this.points=t,this.x=o,this.y=e,this.color=u,this.xVel=0,this.yVel=0,this.baseBoundingBox=this.calcBoundingBox(),this.recalcBoundingBox()}return e(i,[{key:"draw",value:function(n,i){if((!i||!y)&&(i||!x)){n.beginPath(),n.moveTo(this.points[0].x+this.x,this.points[0].y+this.y);for(var t=1;t<this.points.length;t++){var o=this.points[t];n.lineTo(o.x+this.x,o.y+this.y)}n.lineTo(this.points[0].x+this.x,this.points[0].y+this.y),n.strokeStyle="black",n.fillStyle=i?"red":this.color,n.stroke(),n.fill(),c&&(n.strokeStyle="purple",n.strokeRect(this.boundingBox.x,this.boundingBox.y,this.boundingBox.width,this.boundingBox.height))}}},{key:"calcLines",value:function(){for(var n=[],i=0;i<this.points.length;i++){var t=this.points[i],o=void 0;o=i===this.points.length-1?this.points[0]:this.points[i+1],n.push(new I(new S(t.x+this.x,t.y+this.y),new S(o.x+this.x,o.y+this.y)))}return n}},{key:"calcBoundingBox",value:function(){var i,t=null,o=null,e=0,s=0,u=n(this.points);try{for(u.s();!(i=u.n()).done;){var r=i.value;(null==t||r.x<t)&&(t=r.x),(null==o||r.y<o)&&(o=r.y),r.x>e&&(e=r.x),r.y>s&&(s=r.y)}}catch(l){u.e(l)}finally{u.f()}return new E(t,o,e-t,s-o)}},{key:"recalcBoundingBox",value:function(){this.boundingBox=new E(this.baseBoundingBox.x+this.x,this.baseBoundingBox.y+this.y,this.baseBoundingBox.width,this.baseBoundingBox.height)}},{key:"collides",value:function(i){var t,o=n(this.calcLines());try{for(o.s();!(t=o.n()).done;){var e,s=t.value,u=n(i.calcLines());try{for(u.s();!(e=u.n()).done;){if(C(s,e.value))return!0}}catch(r){u.e(r)}finally{u.f()}}}catch(r){o.e(r)}finally{o.f()}return O(this.boundingBox.center,i.boundingBox)}}]),i}(),E=function(){function n(i,t,o,e){s(this,n),this.x=i,this.y=t,this.width=o,this.height=e,this.center=new S(this.x+this.width/2,this.y+this.height/2)}return e(n,[{key:"collides",value:function(n){return N(this,n)}}]),n}(),V=function(){function i(n,t,o,e){s(this,i),this.root=new A(n,t,o,e),this.capacity=1}return e(i,[{key:"insert",value:function(n){this.insertInto(this.root,n)}},{key:"insertInto",value:function(n,i){if(i.boundingBox.collides(n.boundingBox)){n.shapes.length>this.capacity&&!n.subdivided&&this.subdivideNode(n);var t=!0;n.subdivided&&(t=!1,i.boundingBox.collides(n.nw.boundingBox)?i.boundingBox.collides(n.ne.boundingBox)||i.boundingBox.collides(n.sw.boundingBox)||i.boundingBox.collides(n.se.boundingBox)?t=!0:this.insertInto(n.nw,i):i.boundingBox.collides(n.ne.boundingBox)?i.boundingBox.collides(n.sw.boundingBox)||i.boundingBox.collides(n.se.boundingBox)?t=!0:this.insertInto(n.ne,i):i.boundingBox.collides(n.sw.boundingBox)?i.boundingBox.collides(n.se.boundingBox)?t=!0:this.insertInto(n.sw,i):i.boundingBox.collides(n.se.boundingBox)&&this.insertInto(n.se,i)),t&&n.shapes.push(i)}}},{key:"subdivideNode",value:function(i){var t=i.boundingBox.width/2,o=i.boundingBox.height/2;i.nw=new A(i.boundingBox.x,i.boundingBox.y,t,o),i.ne=new A(i.boundingBox.x+t,i.boundingBox.y,t,o),i.sw=new A(i.boundingBox.x,i.boundingBox.y+o,t,o),i.se=new A(i.boundingBox.x+t,i.boundingBox.y+o,t,o),i.subdivided=!0;var e=i.shapes;i.shapes=[];var s,u=n(e);try{for(u.s();!(s=u.n()).done;){var r=s.value;this.insertInto(i,r)}}catch(l){u.e(l)}finally{u.f()}}},{key:"collisions",value:function(n){return this.collisionsFrom(this.root,n)}},{key:"collisionsFrom",value:function(i,t){var o,e=[],s=n(i.shapes);try{for(s.s();!(o=s.n()).done;){var u=o.value;t.id!==u.id&&(t.collides(u)&&e.push(u))}}catch(r){s.e(r)}finally{s.f()}return i.subdivided&&(t.boundingBox.collides(i.nw.boundingBox)&&(e=e.concat(this.collisionsFrom(i.nw,t))),t.boundingBox.collides(i.ne.boundingBox)&&(e=e.concat(this.collisionsFrom(i.ne,t))),t.boundingBox.collides(i.sw.boundingBox)&&(e=e.concat(this.collisionsFrom(i.sw,t))),t.boundingBox.collides(i.se.boundingBox)&&(e=e.concat(this.collisionsFrom(i.se,t)))),e}},{key:"draw",value:function(n,i){n.strokeStyle="black",n.strokeRect(i.boundingBox.x,i.boundingBox.y,i.boundingBox.width,i.boundingBox.height),i.subdivided&&(this.draw(n,i.nw),this.draw(n,i.ne),this.draw(n,i.sw),this.draw(n,i.se))}}]),i}(),A=function n(i,t,o,e){s(this,n),this.shapes=[],this.boundingBox=new E(i,t,o,e),this.nw=null,this.ne=null,this.sw=null,this.se=null,this.subdivided=!1};function F(n,i,t){return i.x<=Math.max(n.x,t.x)&&i.x>=Math.min(n.x,t.x)&&i.y<=Math.max(n.y,t.y)&&i.y>=Math.min(n.y,t.y)}function T(n,i,t){var o=(i.y-n.y)*(t.x-i.x)-(i.x-n.x)*(t.y-i.y);return o>0?1:o<0?2:0}function C(n,i){var t=T(n.p1,n.p2,i.p1),o=T(n.p1,n.p2,i.p2),e=T(i.p1,i.p2,n.p1),s=T(i.p1,i.p2,n.p2);return t!==o&&e!==s||(!(0!==t||!F(n.p1,i.p1,n.p2))||(!(0!==o||!F(n.p1,i.p2,n.p2))||(!(0!==e||!F(i.p1,n.p1,i.p2))||0===s&&F(i.p1,n.p2,i.p2))))}function N(n,i){return n.x<i.x+i.width&&n.x+n.width>i.x&&n.y<i.y+i.height&&n.y+n.height>i.y}function O(n,i){return n.x>i.x&&n.x<i.x+i.width&&n.y>i.y&&n.y<i.y+i.height}var j=document.getElementById("canvas"),L=j.getContext("2d"),R=800,P=800,H=[];function Q(){H=[];for(var n=["blue","purple","pink","orange","black","green"],i=0;i<u;i++){for(var t=[],o=0;o<Math.round(Math.random()*l)+r;o++)t.push(new S(Math.random()*a,Math.random()*d));H.push(new M(i,t,800*Math.random(),800*Math.random(),n[Math.floor(Math.random()*n.length)]))}}function U(){L.fillStyle="white",L.fillRect(0,0,R,P);var i,t=new V(0,0,R,P),o=n(H);try{for(o.s();!(i=o.n()).done;){var e=i.value;e.recalcBoundingBox(),t.insert(e)}}catch(b){o.e(b)}finally{o.f()}h&&t.draw(L,t.root);var s,u=new Set,r=n(H);try{for(r.s();!(s=r.n()).done;){var l=s.value;if(!u.has(l.id)){var a,d=t.collisions(l),c=n(d);try{for(c.s();!(a=c.n()).done;){var y=a.value;u.add(y.id)}}catch(b){c.e(b)}finally{c.f()}d.length>0&&u.add(l.id)}}}catch(b){r.e(b)}finally{r.f()}var x,f=n(H);try{for(f.s();!(x=f.n()).done;){var g=x.value;u.has(g.id)?g.draw(L,!0):g.draw(L)}}catch(b){f.e(b)}finally{f.f()}}function W(){var i,t=n(H);try{for(t.s();!(i=t.n()).done;){var o=i.value;o.xVel+=2*(Math.random()-.5),o.yVel+=2*(Math.random()-.5),o.x+=o.xVel,o.y+=o.yVel,o.x<0&&(o.x=0,o.xVel=0),o.y<0&&(o.y=0,o.yVel=0),o.x>R&&(o.x=R,o.xVel=0),o.y>P&&(o.y=P,o.yVel=0)}}catch(e){t.e(e)}finally{t.f()}}function $(){Q(),U(),setInterval(function(){W(),U()},50)}$();
},{}]},{},["A2T1"], null)
//# sourceMappingURL=https://stovoy.github.io/shape-collisions/app.b7e61727.js.map